fonts = "/data/fonts"

[server]
host = "0.0.0.0"
port = 8080
cors_origins = ["*"]

[telemetry]
enabled = false

[[sources]]
id = "pmtiles"
type = "pmtiles"
path = "/data/tiles/protomaps-sample.pmtiles"
name = "PMTiles Sample"
attribution = "© OpenStreetMap contributors"

[[sources]]
id = "mbtiles"
type = "mbtiles"
path = "/data/tiles/zurich_switzerland.mbtiles"
name = "Zurich MBTiles"
attribution = "© OpenStreetMap contributors"

[postgres]
connection_string = "postgresql://tileserver:tileserver@postgres:5432/tiles"
pool_size = 20
pool_wait_timeout_ms = 30000
pool_create_timeout_ms = 10000
pool_recycle_timeout_ms = 5000
pool_pre_warm = true

[postgres.cache]
size_mb = 256
ttl_seconds = 3600

[[postgres.functions]]
id = "benchmark_points"
schema = "public"
function = "get_benchmark_tiles"
name = "Benchmark Points"
minzoom = 0
maxzoom = 14
bounds = [8.45, 47.32, 8.63, 47.44]

[[postgres.functions]]
id = "filtered_points"
schema = "public"
function = "get_filtered_tiles"
name = "Filtered Points"
minzoom = 0
maxzoom = 14
bounds = [8.45, 47.32, 8.63, 47.44]

[[postgres.tables]]
id = "benchmark_table"
schema = "public"
table = "benchmark_points"
geometry_column = "geom"
id_column = "id"
properties = ["name", "category"]
name = "Benchmark Points (Table Source)"
minzoom = 0
maxzoom = 14
bounds = [8.45, 47.32, 8.63, 47.44]
