---
title: Performance Benchmarks
description: Benchmark results comparing PMTiles vs MBTiles performance in tileserver-rs
---

# Performance Benchmarks

tileserver-rs is designed for high-performance vector tile serving. This page documents benchmark results for both PMTiles and MBTiles sources.

## Test Environment

- **Hardware**: Apple Silicon (M-series) MacBook
- **Build**: Release build (`cargo build --release`)
- **Test Tool**: [autocannon](https://github.com/mcollina/autocannon) (Node.js HTTP benchmarking)
- **Configuration**: 100 concurrent connections, 10 seconds per endpoint

## Test Data

| Source | File | Area | Zoom Range | Size |
|--------|------|------|------------|------|
| PMTiles | `protomaps-sample.pmtiles` | Florence, Italy | 0-15 | 6.3 MB |
| MBTiles | `zurich_switzerland.mbtiles` | Zurich, Switzerland | 0-14 | 34 MB |

## Summary Results

| Source | Avg Requests/sec | Avg Throughput | Avg Latency |
|--------|------------------|----------------|-------------|
| **PMTiles** | 1,047 req/s | 93.18 MB/s | 171ms |
| **MBTiles** | 1,133 req/s | 92.62 MB/s | 181ms |

Both formats deliver **~93 MB/s throughput** with **1,000+ requests/second** under heavy load (100 concurrent connections).

## Detailed Results by Zoom Level

### PMTiles (Florence, Italy)

| Zoom | Location | Requests/sec | Throughput | Avg Latency | P99 Latency |
|------|----------|--------------|------------|-------------|-------------|
| z0 | World | 236 | 97.88 MB/s | 461ms | 1,190ms |
| z4 | Europe | 403 | 95.51 MB/s | 264ms | 607ms |
| z8 | Italy | 1,071 | 91.72 MB/s | 99ms | 191ms |
| z10 | Tuscany | 1,290 | 89.81 MB/s | 81ms | 158ms |
| z12 | Florence | 1,675 | 93.62 MB/s | 62ms | 119ms |
| z14 | City Center | 1,605 | 90.54 MB/s | 63ms | 121ms |

### MBTiles (Zurich, Switzerland)

| Zoom | Location | Requests/sec | Throughput | Avg Latency | P99 Latency |
|------|----------|--------------|------------|-------------|-------------|
| z0 | World | 3,441 | 89.82 MB/s | 29ms | 55ms |
| z4 | Europe | 990 | 89.84 MB/s | 104ms | 207ms |
| z8 | Switzerland | 426 | 92.90 MB/s | 252ms | 669ms |
| z10 | Zurich Region | 590 | 92.33 MB/s | 180ms | 361ms |
| z12 | Zurich City | 1,088 | 91.47 MB/s | 97ms | 191ms |
| z14 | City Center | 266 | 99.37 MB/s | 425ms | 1,166ms |

## Analysis

### Key Insights

- **Throughput is consistent** at ~90-100 MB/s regardless of zoom level
- **Latency scales with tile size** - low zoom (large tiles) = higher latency
- **High zoom requests are fastest** - z10-z14 achieve 1,000-3,400 req/s

### PMTiles Performance

- **Consistent performance** across zoom levels
- **Best at city zoom** (z12-z14): 1,600+ req/s with 62ms latency
- **Memory-mapped file access** provides predictable performance

### MBTiles Performance

- **Fastest at z0**: 3,441 req/s with only 29ms latency
- **SQLite overhead** more visible at high-detail tiles (z14: 425ms)
- **Good for local development** and smaller datasets

### Format Comparison

| Aspect | PMTiles | MBTiles |
|--------|---------|---------|
| Best for | Production, CDN, cloud | Development, local |
| Consistency | More predictable | Variable by tile size |
| High-zoom perf | Excellent | Good |
| Low-zoom perf | Good | Excellent |

## Running Benchmarks

To reproduce these benchmarks:

```bash
# Build release version
cargo build --release

# Start server with benchmark config
./target/release/tileserver-rs --config config.benchmark.toml

# In another terminal, run benchmarks
cd benchmarks
bun install
node run-benchmarks.js --duration 10 --connections 100
```

### Benchmark Options

```bash
# Test only PMTiles
node run-benchmarks.js --source pmtiles

# Test only MBTiles  
node run-benchmarks.js --source mbtiles

# Longer test with more connections
node run-benchmarks.js --duration 30 --connections 200

# Generate markdown report
node run-benchmarks.js --markdown
```

## Why tileserver-rs?

| Feature | tileserver-rs | tileserver-gl | martin |
|---------|---------------|---------------|--------|
| **Language** | Rust | Node.js | Rust |
| **PMTiles** | ✅ | ✅ | ❌ |
| **MBTiles** | ✅ | ✅ | ✅ |
| **PostGIS** | ❌ | ❌ | ✅ |
| **Raster Rendering** | ✅ Native | ✅ Node | ❌ |
| **Static Images** | ✅ | ✅ | ❌ |
| **Throughput** | ~93 MB/s | ~50 MB/s | ~100+ MB/s |

> **tileserver-rs** provides a complete solution: PMTiles + MBTiles support, native MapLibre rendering for raster tiles, and static image generation - all in a single performant binary.

## Optimization Tips

1. **Use release builds** - `cargo build --release` is 10-50x faster than debug
2. **Use PMTiles for production** - cloud-native, HTTP range request friendly
3. **Use MBTiles for development** - easy to generate and inspect with SQLite tools
4. **Enable compression** - gzipped tiles reduce bandwidth significantly
5. **Use CDN caching** - tiles are immutable, cache with long TTLs
6. **Match connections to cores** - more connections than CPU cores adds overhead
